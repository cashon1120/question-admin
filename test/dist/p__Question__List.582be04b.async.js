(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"0V0k":function(e,t,a){"use strict";var n=a("fbTi"),l=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("kqFD");var i=l(a("LKgu"));a("Ubc6");var s=l(a("far6"));a("rVLg");var o=l(a("EmQR")),r=l(a("mK77")),u=l(a("43Yg")),c=l(a("/tCh")),d=l(a("scpF")),f=l(a("O/V9")),p=l(a("8aBX"));a("880f");var m=l(a("lNJz")),h=n(a("i9FB")),g=a("LneV");a("SX54");var y=l(a("+YLN")),v=l(a("cPMy")),D=l(a("CEDc")),I=l(a("a/LZ")),k=m.default.confirm,S=function(e){function t(){var e;return(0,u.default)(this,t),e=(0,d.default)(this,(0,f.default)(t).apply(this,arguments)),e.state={loading:!1,modalVisible:!1,selectedRowKeys:[],searchData:{name:"",status:"",startTime:"",endTime:""},pageInfo:{pageSize:10,pageNumber:1}},e.columns=[{title:"\u9898\u76ee",dataIndex:"topic",key:"topic"},{title:"\u95ee\u9898",dataIndex:"questions",key:"questions"},{title:"\u64cd\u4f5c",width:200,render:function(t){return h.default.createElement("div",{className:"table-operate"},h.default.createElement(y.default,{to:"/question/detail/".concat(t.id)},"\u8be6\u60c5"),h.default.createElement("a",{onClick:function(){return e.handleDel(t.id)}},"\u5220\u9664"))}}],e.handleTriggerModal=function(){var t=e.state.modalVisible;e.setState({modalVisible:!t})},e.handleSelectRows=function(t){e.setState({selectedRowKeys:t})},e.getSerarchColumns=function(){var e=[{title:"\u9898\u76ee",dataIndex:"title",componentType:"Input"},{title:"\u521b\u5efa\u65e5\u671f",dataIndex:"times",componentType:"RangePicker",col:8}];return e},e.handleSearch=function(t){var a=e.state.searchData,n="",l="";t.times&&(n=(0,I.default)(t.times[0]).format("YYYY-MM-DD HH:mm:ss"),l=(0,I.default)(t.times[1]).format("YYYY-MM-DD HH:mm:ss")),e.setState({searchData:(0,r.default)({},a,{name:t.name,status:t.status,startTime:n,endTime:l})},function(){e.initData()})},e.handleFormReset=function(){e.setState({searchData:{}},function(){e.initData()})},e.exportFiel=function(){var t=e.props.dispatch,a=e.state.selectedRowKeys;0!==a.length?t&&t({type:"userInfo/exportFile",payload:{}}):o.default.error("\u8bf7\u52fe\u9009\u8981\u5bfc\u51fa\u7684\u6570\u636e")},e.handleDel=function(t){var a=e.props.dispatch,n=function(t){t.success&&(o.default.success("\u64cd\u4f5c\u6210\u529f"),e.initData())};k({title:"\u5220\u9664\u9898\u76ee",content:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u9898\u76ee\u5417?",onOk:function(){a&&a({type:"question/del",payload:{sysUserId:localStorage.getItem("sysUserId"),questionId:t},callback:n})}})},e}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(e){var t=this;this.setState({loading:!0});var a=function(){t.setState({loading:!1})},n=this.props.dispatch,l=this.state,i=l.pageInfo,s=l.searchData,o={};for(var u in s)s[u]&&(o[u]=s[u]);e&&this.setState({pageInfo:{pageNumber:e.pageNumber,pageSize:e.pageSize}}),n&&n({type:"question/fetch",payload:(0,r.default)({sysUserId:localStorage.getItem("sysUserId")},i,e),callback:a})}},{key:"uploadIfle",value:function(){this.refs.fileInput&&this.refs.fileInput.click()}},{key:"handleChange",value:function(e){var t=e.target.files;if(!(t.length<=0)){var a=".xls, .xlsx, .xlsm",n=this.props.dispatch,l=t[0],i=l.name.split("."),s=i[i.length-1];if(a.includes(s)){var r=function(e){e.success?o.default.success("\u5bfc\u5165\u6210\u529f"):o.default.error("\u5bfc\u5165\u5931\u8d25")},u=new FormData;u.append("file",l),n&&(console.log(123),n({type:"question/importExcel",payload:u,callback:r}))}else o.default.error("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u6587\u4ef6\u683c\u5f0f".concat(a))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.loading;return h.default.createElement(s.default,null,h.default.createElement("div",{className:"flex-container"},h.default.createElement("div",{className:"flex-1"},h.default.createElement(D.default,{columns:this.getSerarchColumns(),handleSearch:this.handleSearch,handleFormReset:this.handleFormReset})),h.default.createElement("div",null,h.default.createElement("a",{onClick:function(){return e.uploadIfle()}},h.default.createElement("input",{accept:".xls, .xlsx, .xlsm",onChange:function(t){return e.handleChange(t)},ref:"fileInput",style:{display:"none"},type:"file"}),h.default.createElement(i.default,{type:"primary"},"\u5bfc\u5165\u9898\u5e93")))),h.default.createElement(v.default,{rowKey:"id",columns:this.columns,data:a||[],loading:n,onChangeCombine:function(t){return e.initData(t)}}))}}]),t}(h.Component),x=(0,g.connect)(function(e){var t=e.question,a=e.loading;return{data:t.data,loading:a.models.question}})(S);t.default=x}}]);