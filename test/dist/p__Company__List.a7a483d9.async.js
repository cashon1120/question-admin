(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"ibo/":function(e,t,a){"use strict";var n=a("fbTi"),l=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a("lclS")),d=l(a("mK77"));a("rVLg");var o=l(a("EmQR")),r=l(a("43Yg")),s=l(a("/tCh")),c=l(a("scpF")),u=l(a("O/V9")),m=l(a("8aBX")),f=n(a("i9FB")),h=a("LneV"),p=l(a("hgAY")),g=function(e){function t(){var e;return(0,r.default)(this,t),e=(0,c.default)(this,(0,u.default)(t).apply(this,arguments)),e.state={confirmLoading:!1},e.handleSubmitModal=function(t){var a=e.props,n=a.onOk,l=a.dispatch,i=a.modalData.id;e.setState({confirmLoading:!0});var r=function(a){a.success?o.default.success("\u64cd\u4f5c\u6210\u529f"):o.default.error(a.data),e.setState({confirmLoading:!1}),n(t)},s=i?"company/update":"company/add",c=i?(0,d.default)({sysUserId:localStorage.getItem("sysUserId"),selectedUserId:i},t):(0,d.default)({sysUserId:localStorage.getItem("sysUserId")},t);l({type:s,payload:c,callback:r})},e}return(0,m.default)(t,e),(0,s.default)(t,[{key:"modalFromColumns",value:function(){var e=this.props.modalData,t=e.company_name,a=e.phone;return[{title:"\u516c\u53f8\u540d\u79f0",dataIndex:"companyName",componentType:"Input",initialValue:t,requiredMessage:"\u8bf7\u8f93\u5165\u516c\u53f8\u540d\u79f0",required:!0,placeholder:"\u8bf7\u8f93\u5165\u516c\u53f8\u540d\u79f0"},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"phone",componentType:"Input",initialValue:a,requiredMessage:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd",required:!0,placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u7535\u8bdd"}]}},{key:"render",value:function(){var e=this.state.confirmLoading,t=this.props,a=t.modalVisible,n=t.onCancel,l=t.modalData.id;return f.default.createElement(f.Fragment,null,f.default.createElement(p.default,{title:l?"\u4fee\u6539\u8d26\u53f7":"\u65b0\u589e\u8d26\u53f7",columns:this.modalFromColumns(),onOk:this.handleSubmitModal,visible:a,confirmLoading:e,onCancel:n}))}}]),t}(f.Component),y=(0,h.connect)(function(e){return(0,i.default)(e),{}})(g);t.default=y},lclS:function(e,t){function a(e){if(null==e)throw new TypeError("Cannot destructure undefined")}e.exports=a},wKhv:function(e,t,a){"use strict";var n=a("fbTi"),l=a("mZ4U");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("kqFD");var i=l(a("LKgu"));a("Ubc6");var d=l(a("far6")),o=l(a("mK77"));a("rVLg");var r=l(a("EmQR")),s=l(a("43Yg")),c=l(a("/tCh")),u=l(a("scpF")),m=l(a("O/V9")),f=l(a("8aBX"));a("880f");var h=l(a("lNJz")),p=n(a("i9FB")),g=a("LneV");a("SX54");var y=l(a("cPMy")),v=l(a("CEDc")),b=l(a("ibo/")),D=l(a("bMyU")),S=h.default.confirm,I=function(e){function t(){var e;return(0,s.default)(this,t),e=(0,u.default)(this,(0,m.default)(t).apply(this,arguments)),e.state={loading:!1,modalVisible:!1,imgDetailVisible:!1,imgUrl:"",modalData:{},selectedRowKeys:[],searchData:{name:"",status:"",startTime:"",endTime:""},pageInfo:{pageSize:10,pageNumber:1}},e.columns=[{title:"\u516c\u53f8\u540d\u79f0",dataIndex:"company_name",key:"company_name"},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"phone",key:"phone"},{title:"\u8003\u8bd5\u4e8c\u7ef4\u7801",key:"ks_img_url",render:function(t){return p.default.createElement("div",null,p.default.createElement("img",{style:{width:80,height:80},src:t.ks_img_url,onClick:function(){e.handleShowImgDetail(t.ks_img_url)},alt:""}))}},{title:"\u64cd\u4f5c",width:200,render:function(t){return p.default.createElement("div",{className:"table-operate"},p.default.createElement("a",{onClick:function(){return e.handleEdit(t)}},"\u4fee\u6539"),p.default.createElement("a",{onClick:function(){return e.handleDel(t.id)}},"\u5220\u9664"),p.default.createElement("a",{onClick:function(){return e.handleSetImg(t.id)}},"\u751f\u6210\u4e8c\u7ef4\u7801"))}}],e.handleTriggerModal=function(){var t=e.state.modalVisible;e.setState({modalVisible:!t})},e.handleSetImg=function(t){var a=e.props.dispatch,n=function(t){t.success?(r.default.success("\u64cd\u4f5c\u6210\u529f"),e.initData()):r.default.error(t.data)};a&&a({type:"company/setImg",payload:{sysUserId:t},callback:n})},e.handleShowImgDetail=function(t){var a=e.state.imgDetailVisible;a?e.setState({imgDetailVisible:!1}):t&&e.setState({imgUrl:t,imgDetailVisible:!0})},e.getSerarchColumns=function(){var e=[{title:"\u516c\u53f8\u540d\u79f0",dataIndex:"name",componentType:"Input"}];return e},e.handleSearch=function(t){var a=e.state.searchData;e.setState({searchData:(0,o.default)({},a,t)},function(){e.initData()})},e.handleFormReset=function(){e.setState({searchData:{}},function(){e.initData()})},e.handleDel=function(t){var a=e.props.dispatch,n=function(t){t.success?(r.default.success("\u64cd\u4f5c\u6210\u529f"),e.initData()):r.default.error(t.data)};S({title:"\u7cfb\u7edf\u63d0\u793a",content:"\u786e\u8ba4\u8981\u5220\u9664\u8be5\u516c\u53f8\u5417?",onOk:function(){a&&a({type:"company/del",payload:{sysUserId:localStorage.getItem("sysUserId"),selectedUserId:t},callback:n})}})},e.handleEdit=function(t){e.setState({modalData:(0,o.default)({},t)}),e.handleTriggerModal()},e.handleAddNew=function(){e.setState({modalData:{}}),e.handleTriggerModal()},e.handleSubmitModal=function(){e.initData(),e.handleTriggerModal()},e.handleSaveImg=function(){var e=new Image;e.setAttribute("crossOrigin","Anonymous"),e.src="http://ymhx.f3322.net:8123/uploads/images/19-08-22/602254cfa30f4ee28c5d6a4f75ce5862.png",e.onload=function(){var t=document.createElement("canvas");t.width=300,t.height=300;var a=t.getContext("2d");if(a){a.drawImage(e,0,0,300,300);var n=t.toDataURL("image/jpeg"),l=document.createElement("a"),i=new MouseEvent("click");l.download=name||"\u4e0b\u8f7d\u56fe\u7247\u540d\u79f0",l.href=n,l.dispatchEvent(i)}}},e}return(0,f.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){this.initData()}},{key:"initData",value:function(e){var t=this.props.dispatch,a=this.state.searchData,n={};for(var l in a)a[l]&&(n[l]=a[l]);e&&this.setState({pageInfo:{pageNumber:e.pageNumber,pageSize:e.pageSize}}),t&&t({type:"company/fetch",payload:(0,o.default)({sysUserId:localStorage.getItem("sysUserId")},n,e)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.loading,l=this.state,o=l.modalVisible,r=l.modalData,s=l.imgUrl,c=l.imgDetailVisible;return p.default.createElement(d.default,null,p.default.createElement("div",{className:"flex-container"},p.default.createElement("div",{className:"flex-1"},p.default.createElement(v.default,{columns:this.getSerarchColumns(),handleSearch:this.handleSearch,handleFormReset:this.handleFormReset})),p.default.createElement("div",null,p.default.createElement(i.default,{type:"primary",onClick:this.handleAddNew},"\u65b0\u589e"))),p.default.createElement(y.default,{rowKey:"id",columns:this.columns,data:a||[],loading:n,onChangeCombine:function(t){return e.initData(t)}}),p.default.createElement(b.default,{modalVisible:o,modalData:r,onCancel:this.handleTriggerModal,onOk:this.handleSubmitModal}),p.default.createElement(D.default,{imgUrl:s,visible:c,onCancel:this.handleShowImgDetail}))}}]),t}(p.Component),k=(0,g.connect)(function(e){var t=e.company,a=e.loading;return{data:t.data,loading:a.models.company}})(I);t.default=k}}]);